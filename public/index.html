<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Assistant Chat</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #121212;
        color: #ffffff;
      }
      /* Dark theme for input fields and text areas */
      .form-control,
      #run_id,
      #assistant_name,
      #assistant_id,
      #thread_id,
      #agent_context {
        background-color: #2c2c2c !important;
        color: #ffffff !important;
        border: 1px solid #444;
        border-radius: 0.25rem;
      }

      /* Placeholder styling */
      ::placeholder {
        color: #cccccc !important; /* Match the color of system messages */
        opacity: 1;
      }

      .message-container {
        height: 200px;
        overflow-y: scroll;
        border: 1px solid #444;
        padding: 10px;
        margin-bottom: 15px;
        background-color: #2c2c2c;
        border-radius: 5px;
      }

      .message-wrapper {
        display: flex;
        width: 100%;
        margin-bottom: 10px;
      }

      .message {
        max-width: 75%;
        padding: 10px;
        border-radius: 10px;
        word-wrap: break-word;
        font-size: 14px;
      }

      /* Pastel colors for user and assistant messages */
      .message.user {
        background-color: #a8d5e2; /* Pastel blue */
        color: #121212;
        margin-left: auto;
        text-align: right;
      }

      .message.assistant {
        background-color: #ffdcb2; /* Pastel orange */
        color: #121212;
        margin-right: auto;
        text-align: left;
      }

      .system-message {
        color: #cccccc;
        font-style: italic;
        margin-bottom: 10px;
      }

      .btn {
        background-color: #28a745;
        border-color: #28a745;
        color: #ffffff;
      }

      .btn:hover {
        background-color: #218838;
        border-color: #1e7e34;
      }

      .rotating-dollar-container {
        display: none;
        background-color: #28a745;
        color: #ffffff;
        font-size: 24px;
        width: 75px;
        height: 38px;
        border-radius: 0.25rem;
        justify-content: center;
        align-items: center;
        display: flex;
      }

      .rotating-dollar {
        animation: rotate 1s linear infinite;
      }

      @keyframes rotate {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .align-button {
        margin-top: 32px; /* Adjust as needed to align with the input field */
      }
    </style>
    <!-- Marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  </head>
  <body>
    <div class="container my-5">
      <h1 class="text-center">Assistant Chat</h1>

      <!-- Row for Assistant Name, Get Assistant Button, and Assistant ID -->
      <div class="row mb-3">
        <div class="col-md-4">
          <label for="assistant_name" class="form-label">Assistant Name</label>
          <input
            id="assistant_name"
            type="text"
            class="form-control"
            placeholder="Assistant Name"
            value="Test002"
          />
        </div>
        <div class="col-md-4">
          <label class="form-label">&nbsp;</label>
          <button id="get_assistant" class="btn btn-primary w-100" onclick="getAssistant()">
            Get Assistant
          </button>
        </div>
        <div class="col-md-4">
          <label for="assistant_id" class="form-label">Assistant ID</label>
          <input
            id="assistant_id"
            type="text"
            class="form-control"
            placeholder="Assistant ID"
            readonly
          />
        </div>
      </div>

      <!-- Row for Create New Thread Button and Thread ID -->
      <div class="row mb-3">
        <div class="col-md-6 align-button">
          <button id="newThreadBtn" class="btn btn-primary w-100" onclick="getThread()">
            Create New Thread
          </button>
        </div>
        <div class="col-md-6">
          <label for="thread_id" class="form-label">Thread ID</label>
          <input
            id="thread_id"
            type="text"
            class="form-control"
            placeholder="Thread ID will appear here"
            readonly
          />
        </div>
      </div>

      <!-- Message Display -->
      <div class="message-container" id="message-container"></div>

      <!-- Message Input -->
      <div class="input-group mb-3">
        <input
          type="text"
          id="messageInput"
          class="form-control"
          placeholder="Type your message..."
        />
        <button id="sendBtn" class="btn btn-success" onclick="getResponse()">
          Send
        </button>
        <div class="rotating-dollar-container" id="loadingDollar">
          <span class="rotating-dollar">$</span>
        </div>
      </div>
      
      <!-- Current Run ID Display -->
      <div class="mb-3">
        <label for="run_id" class="form-label">Current Run ID</label>
        <input
          id="run_id"
          type="text"
          class="form-control"
          placeholder="Run ID will appear here"
          readonly
        />
      </div>

      <!-- Agent Context Window -->
      <div class="mb-3">
        <label for="agent_context" class="form-label">Agent Context Window</label>
        <textarea
          id="agent_context"
          class="form-control"
          rows="10"
          placeholder="Full message from console will appear here"
          readonly
        ></textarea>
      </div>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="scripts.js"></script>
  </body>
</html>
